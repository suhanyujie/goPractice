## 第9章

### 9.1 反射
* `反射`是首次出现于Java语言中的概念，通过反射可以获取丰富的类型信息
* Go语言中的反射，我们要理解2个基本概念：`Type`、`Value`
* `Type`主要表达的是被反射的这个变量本身的类型信息，而`Value`则为该变量实例本身的信息
* 通过调用reflect中的`ValueOf`和`TypeOf`的方法，获取对应的实例

#### 获取值类型
* 通过`Type`中的一个成员函数`CanSet() bool`查看变量是否可以用反射进行修改值操作
* 有些变量，使用`ValueOf`会基于原数据产生一个副本
* 通过变量的指针，可以实现用反射修改值操作

#### 对结构体的反射操作
* 对于结构的反射操作没有根本上的不同，只是用了`Field()`方法来按索引获取对应的成员

### 9.2 Go和C语言的交互
* 在导入C包之前，使用注释的方式引入c的库，如下：

```cgo
/*
#include <stdlib.h>
*/
import "C"
```

* 其中，注释的内容是有意义的，使用行注释也是可行的，前提是，紧贴`import "C"`
* 在注释中，可以书写任意的c代码，定义函数等

### 9.4 goroutine机理
* 协程这个术语应该是随着Lua语言的流行而流行起来的，要刨根究底的话，协程第一次出现在1963年，用于汇编编程
* Go语言作者之一Russ Cox在Go语言出世之前，设计实现了一个轻量级协程库`libtask`，可以参考源代码了解协程的实现，https://swtch.com/libtask/
* 协程库主要包含以下几个模块：
    * 任务以及任务管理
    * 任务调度器
    * 异步IO
    * channel（通信机制）

### 接口原理
* 一个核心的问题就是：从机器的角度如何判断一个SimpleSpeaker类型实现了ISpeaker接口的所有方法？一个简单的逻辑就是需要获取这个类型的所有方法集合（集合A）
* 并获取该接口包含的所有方法集合（集合B），然后判断列表B是否为列表A的子集，是则意味着SimpleSpeaker类型实现了ISpeaker接口。
